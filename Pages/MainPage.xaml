<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:AppointmentSimulator.ViewModels"
             xmlns:pages="clr-namespace:AppointmentSimulator.Pages"
             x:Class="AppointmentSimulator.MainPage"
             Title="Citas">

    <ContentPage.BindingContext>
        <viewmodels:AppointmentViewModel />
    </ContentPage.BindingContext>

    <VerticalStackLayout Padding="20" Spacing="15">

        <Button Text="Nueva Cita"
                BackgroundColor="DodgerBlue"
                TextColor="White"
                Clicked="OnNewAppointmentClicked"/>

        <CollectionView ItemsSource="{Binding Appointments}"
                        SelectedItem="{Binding SelectedAppointment}"
                        SelectionMode="Single"
                        HeightRequest="400">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BorderColor="LightGray" Margin="5" Padding="10">
                        <VerticalStackLayout>
                            <Label Text="{Binding Name}" FontAttributes="Bold"/>
                            <Label Text="{Binding Subject}" />
                            <Label Text="{Binding AppointmentDate}" />
                            <Label Text="{Binding StartingTime}" />
                            <Label Text="{Binding EndingTime}" />
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Button Text="Eliminar Cita"
                BackgroundColor="Red"
                TextColor="White"
                Command="{Binding DeleteAppointmentCommand}" />

    </VerticalStackLayout>
</ContentPage>
